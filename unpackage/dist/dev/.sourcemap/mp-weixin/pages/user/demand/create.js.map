{"version":3,"file":"create.js","sources":["pages/user/demand/create.vue","D:/æ¯”èµ›è½¯ä»¶/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9kZW1hbmQvY3JlYXRlLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"container\" :class=\"{ 'large-font': largeFontMode }\" @tap=\"closeSelectDropdown\"\r\n\t\t@click=\"closeSelectDropdown\">\r\n\t\t<view class=\"page-header-row\">\r\n\t\t\t<text class=\"page-title\">å‘å¸ƒéœ€æ±‚</text>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-intro\">\r\n\t\t\t<text class=\"intro-title\">å‘å¸ƒç”¨ç”µéœ€æ±‚</text>\r\n\t\t\t<text class=\"intro-desc\">è¯·è¯¦ç»†å¡«å†™æ‚¨çš„éœ€æ±‚ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨åŒ¹é…æœ€åˆé€‚çš„ä¸“ä¸šå¸ˆå‚…</text>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-section\">\r\n\t\t\t<view class=\"section-title\">\r\n\t\t\t\t<text class=\"section-label\">éœ€æ±‚ç±»å‹</text>\r\n\t\t\t\t<text class=\"section-desc\">è¯·é€‰æ‹©æ‚¨çš„éœ€æ±‚ç±»å‹</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"select-wrapper\" @tap.stop=\"toggleSelectDropdown\" @click.stop=\"toggleSelectDropdown\">\r\n\t\t\t\t<view class=\"select-display\">\r\n\t\t\t\t\t<text class=\"select-text\" v-if=\"getSelectedSceneLabel()\">{{ getSelectedSceneLabel() }}</text>\r\n\t\t\t\t\t<text class=\"select-placeholder\" v-else>è¯·é€‰æ‹©éœ€æ±‚ç±»å‹</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"select-arrow\" :class=\"{ 'open': showSelectDropdown }\">\r\n\t\t\t\t\t<text class=\"arrow-icon\">â–¼</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"select-dropdown\" v-if=\"showSelectDropdown\" @tap.stop @click.stop>\r\n\t\t\t\t<view class=\"select-option\" v-for=\"scene in sceneTypes\" :key=\"scene.value\"\r\n\t\t\t\t\t:class=\"{ 'selected': formData.service_type === scene.value }\" @tap.stop=\"selectScene(scene.value)\"\r\n\t\t\t\t\t@click.stop=\"selectScene(scene.value)\">\r\n\t\t\t\t\t<view class=\"option-icon\">{{ getSceneIcon(scene.value) }}</view>\r\n\t\t\t\t\t<text class=\"option-label\">{{ scene.label }}</text>\r\n\t\t\t\t\t<view class=\"option-check\" v-if=\"formData.service_type === scene.value\">\r\n\t\t\t\t\t\t<text class=\"check-icon\">âœ“</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-section\">\r\n\t\t\t<view class=\"section-title\">\r\n\t\t\t\t<text class=\"section-label\">éœ€æ±‚æ ‡é¢˜</text>\r\n\t\t\t\t<text class=\"section-desc\">ç®€è¦æè¿°æ‚¨çš„éœ€æ±‚</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"input-wrapper\">\r\n\t\t\t\t<input class=\"input\" v-model=\"formData.title\" :placeholder=\"placeholderTitle\"\r\n\t\t\t\t\t:style=\"{ fontSize: fontSize + 'rpx' }\" />\r\n\t\t\t\t<view class=\"voice-btn\" @click=\"startVoiceInput('title')\" @tap=\"startVoiceInput('title')\"\r\n\t\t\t\t\t:class=\"{ 'recording': recordingType === 'title' }\">\r\n\t\t\t\t\t<text class=\"voice-icon\">{{ recordingType === 'title' ? 'â¹' : 'ğŸ¤' }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-section\">\r\n\t\t\t<view class=\"section-title\">\r\n\t\t\t\t<text class=\"section-label\">è¯¦ç»†æè¿°</text>\r\n\t\t\t\t<text class=\"section-desc\">è¯·è¯¦ç»†æè¿°ç°åœºæƒ…å†µã€æ–½å·¥èŒƒå›´åŠæœŸæœ›å®Œæˆæ—¶é—´</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"textarea-wrapper\">\r\n\t\t\t\t<textarea class=\"textarea\" v-model=\"formData.description\" :placeholder=\"placeholderDesc\"\r\n\t\t\t\t\t:style=\"{ fontSize: (fontSize > 22 ? fontSize : 32) + 'rpx', lineHeight: '2.0' }\" auto-height\r\n\t\t\t\t\tmaxlength=\"300\" />\r\n\t\t\t\t<view class=\"voice-btn\" @click=\"startVoiceInput('description')\" @tap=\"startVoiceInput('description')\"\r\n\t\t\t\t\t:class=\"{ 'recording': recordingType === 'description' }\">\r\n\t\t\t\t\t<text class=\"voice-icon\">{{ recordingType === 'description' ? 'â¹' : 'ğŸ¤' }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-section\">\r\n\t\t\t<view class=\"section-title\">\r\n\t\t\t\t<text class=\"section-label\">åŠŸç‡éœ€æ±‚</text>\r\n\t\t\t\t<text class=\"section-desc\">é¢„ä¼°åŠŸç‡ï¼ˆå¯é€‰ï¼Œå¦‚ä¸ç¡®å®šå¯ç•™ç©ºï¼‰</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"power-input-wrapper\">\r\n\t\t\t\t<input class=\"input power-input\" type=\"digit\" v-model=\"formData.power_kw\" placeholder=\"ä¾‹å¦‚ 20ï¼ˆå¯é€‰ï¼‰\"\r\n\t\t\t\t\t:style=\"{ fontSize: fontSize + 'rpx' }\" />\r\n\t\t\t\t<text class=\"unit\">kW</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-section\">\r\n\t\t\t<view class=\"section-title\">\r\n\t\t\t\t<text class=\"section-label\">æ–½å·¥åœ°å€</text>\r\n\t\t\t\t<text class=\"section-desc\">è¯·é€‰æ‹©æˆ–è¾“å…¥è¯¦ç»†åœ°å€</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"address-wrapper\" @click=\"selectAddress\">\r\n\t\t\t\t<text class=\"address-text\" v-if=\"formData.address\">{{ formData.address }}</text>\r\n\t\t\t\t<text class=\"address-placeholder\" v-else>è¯·é€‰æ‹©æˆ–å®šä½åœ°å€</text>\r\n\t\t\t\t<text class=\"address-icon\">ğŸ“</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"location-info\" v-if=\"formData.lng && formData.lat\">\r\n\t\t\t\t<text>å®šä½ï¼š{{ formData.lat.toFixed(6) }}, {{ formData.lng.toFixed(6) }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-section\">\r\n\t\t\t<view class=\"section-title\">\r\n\t\t\t\t<text class=\"section-label\">ç°åœºç…§ç‰‡</text>\r\n\t\t\t\t<text class=\"section-desc\">ä¸Šä¼ ç°åœºç…§ç‰‡ï¼Œå¸®åŠ©å¸ˆå‚…æ›´å¥½åœ°äº†è§£æƒ…å†µï¼ˆå¯é€‰ï¼‰</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"photo-upload\">\r\n\t\t\t\t<view class=\"photo-item\" v-for=\"(photo, index) in formData.photos\" :key=\"index\">\r\n\t\t\t\t\t<image :src=\"getPhotoUrl(photo)\" class=\"photo-image\" mode=\"aspectFill\" />\r\n\t\t\t\t\t<view class=\"photo-delete\" @click=\"removePhoto(index)\">Ã—</view>\r\n\t\t\t\t\t<view class=\"photo-ai-btn\" @click=\"analyzePhoto(index)\"\r\n\t\t\t\t\t\tv-if=\"!getPhotoAIStatus(photo, 'analyzing') && !getPhotoAIStatus(photo, 'result')\">\r\n\t\t\t\t\t\t<text class=\"ai-text\">æ™ºèƒ½åˆ†æ</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"photo-ai-loading\" v-if=\"getPhotoAIStatus(photo, 'analyzing')\">\r\n\t\t\t\t\t\t<text class=\"ai-loading-text\">åˆ†æä¸­...</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"photo-add\" @click=\"choosePhoto\" v-if=\"formData.photos.length < 9\">\r\n\t\t\t\t\t<text class=\"photo-add-icon\">+</text>\r\n\t\t\t\t\t<text class=\"photo-add-text\">æ·»åŠ ç…§ç‰‡</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- AIåˆ†æç»“æœå±•ç¤º -->\r\n\t\t\t<view class=\"ai-result-section\" v-if=\"aiAnalysisResults.length > 0\">\r\n\t\t\t\t<view class=\"ai-result-title\">\r\n\t\t\t\t\t<text class=\"ai-title-text\">åˆ†æç»“æœ</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"ai-result-item\" v-for=\"(result, index) in aiAnalysisResults\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"ai-result-header\">\r\n\t\t\t\t\t\t<image :src=\"result.photoUrl\" class=\"ai-result-photo\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t<view class=\"ai-result-info\">\r\n\t\t\t\t\t\t\t<text class=\"ai-result-label\">åˆ†æç»“æœ</text>\r\n\t\t\t\t\t\t\t<text class=\"ai-result-time\">{{ result.time }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"ai-result-content\">\r\n\t\t\t\t\t\t<view class=\"ai-result-desc\">\r\n\t\t\t\t\t\t\t<text class=\"ai-desc-label\">é—®é¢˜è¯†åˆ«ï¼š</text>\r\n\t\t\t\t\t\t\t<text class=\"ai-desc-text\">{{ result.analysis }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"ai-result-solution\">\r\n\t\t\t\t\t\t\t<text class=\"ai-solution-label\">æ”¹é€ æ–¹æ¡ˆï¼š</text>\r\n\t\t\t\t\t\t\t<text class=\"ai-solution-text\">{{ result.solution }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-actions\">\r\n\t\t\t<button class=\"btn btn-secondary\" @click=\"saveDraft\">ä¿å­˜è‰ç¨¿</button>\r\n\t\t\t<button class=\"btn btn-primary\" @click=\"submitDemand\" :loading=\"submitting\">\r\n\t\t\t\t{{ submitting ? 'æäº¤ä¸­...' : 'å‘å¸ƒéœ€æ±‚' }}\r\n\t\t\t</button>\r\n\t\t</view>\r\n\r\n\t\t<service-float />\r\n\r\n\t\t<!-- è¯­è¨€é€‰æ‹©å™¨å¼¹çª— -->\r\n\t\t<view class=\"language-picker-mask\" v-if=\"showLanguagePicker\" @click=\"closeLanguagePicker\">\r\n\t\t\t<view class=\"language-picker\" @click.stop>\r\n\t\t\t\t<view class=\"picker-header\">\r\n\t\t\t\t\t<text class=\"picker-title\">é€‰æ‹©è¯­è¨€</text>\r\n\t\t\t\t\t<text class=\"picker-close\" @click=\"closeLanguagePicker\">Ã—</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<scroll-view class=\"picker-content\" scroll-y>\r\n\t\t\t\t\t<view class=\"picker-item\" v-for=\"(lang, index) in languageList\" :key=\"index\"\r\n\t\t\t\t\t\t:class=\"{ 'active': selectedLanguage === lang }\" @click=\"selectLanguage(lang)\">\r\n\t\t\t\t\t\t<text class=\"picker-item-text\">{{ lang }}</text>\r\n\t\t\t\t\t\t<text class=\"picker-item-check\" v-if=\"selectedLanguage === lang\">âœ“</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport request from '@/utils/request.js';\r\n\timport offline from '@/utils/offline.js';\r\n\timport userStore from '@/store/user.js';\r\n\timport {\r\n\t\treverseGeocode\r\n\t} from '@/utils/amap.js';\r\n\timport ServiceFloat from '@/components/ServiceFloat.vue';\r\n\timport baiduSpeech from '@/utils/baidu-speech.js';\r\n\r\n\t// æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼ˆå°è¯•ç”¨æœ¬åœ°å­˜å‚¨è‡ªåŠ¨æ¢å¤ï¼Œé¿å…é‡å¤å¼¹çª—ï¼‰\r\n\tfunction checkLogin() {\r\n\t\t// å·²ç™»å½•ç›´æ¥é€šè¿‡\r\n\t\tif (userStore.state.isLoggedIn) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// å°è¯•ä»æœ¬åœ°å­˜å‚¨æ¢å¤\r\n\t\tconst token = uni.getStorageSync('token');\r\n\t\tconst userInfo = uni.getStorageSync('userInfo');\r\n\t\tif (token && userInfo) {\r\n\t\t\tuserStore.setUserInfo(userInfo, token);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// ä»æœªç™»å½•ï¼Œæç¤ºè·³è½¬\r\n\t\tuni.showModal({\r\n\t\t\ttitle: 'éœ€è¦ç™»å½•',\r\n\t\t\tcontent: 'å‘å¸ƒéœ€æ±‚éœ€è¦å…ˆç™»å½•ï¼Œæ˜¯å¦å‰å¾€ç™»å½•ï¼Ÿ',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/user/login/index'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn false;\r\n\t}\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tServiceFloat\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tservice_type: 1,\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tdescription: '',\r\n\t\t\t\t\tpower_kw: '',\r\n\t\t\t\t\taddress: '',\r\n\t\t\t\t\tlng: null,\r\n\t\t\t\t\tlat: null,\r\n\t\t\t\t\tphotos: [],\r\n\t\t\t\t\toffline_local_id: null\r\n\t\t\t\t},\r\n\t\t\t\tsceneTypes: [{\r\n\t\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\t\tlabel: 'ç”Ÿæ´»ç”¨ç”µæ”¹é€ ',\r\n\t\t\t\t\t\timage: '/static/yd.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: 2,\r\n\t\t\t\t\t\tlabel: 'ç”µè·¯ç»´ä¿®',\r\n\t\t\t\t\t\timage: '/static/yd.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: 3,\r\n\t\t\t\t\t\tlabel: 'ç”µå™¨ç»´æŠ¤',\r\n\t\t\t\t\t\timage: '/static/yd.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: 4,\r\n\t\t\t\t\t\tlabel: 'ç”¨ç”µæ•…éšœæ’é™¤',\r\n\t\t\t\t\t\timage: '/static/yd.png'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tsubmitting: false,\r\n\t\t\t\tlargeFontMode: false,\r\n\t\t\t\tfontSize: 22,\r\n\t\t\t\tplaceholderTitle: 'ä¾‹å¦‚ï¼šå®¶é‡Œç”µè·¯è·³é—¸éœ€è¦ç»´ä¿®',\r\n\t\t\t\tplaceholderDesc: 'è¯·è¯¦ç»†æè¿°ç”¨ç”µé—®é¢˜ã€ç°åœºæƒ…å†µã€éœ€è¦ç»´ä¿®çš„ç”µå™¨ç±»å‹åŠæœŸæœ›å®Œæˆæ—¶é—´ï¼Œä¿¡æ¯è¶Šè¯¦ç»†è¶Šå®¹æ˜“åŒ¹é…åˆ°åˆé€‚çš„å¸ˆå‚…',\r\n\t\t\t\trecordingType: null, // å½“å‰å½•éŸ³ç±»å‹ï¼š'title' æˆ– 'description'\r\n\t\t\t\trecorderManager: null,\r\n\t\t\t\trecordingTime: 0,\r\n\t\t\t\trecordingTimer: null,\r\n\t\t\t\tselectedLanguage: 'æ™®é€šè¯', // é€‰æ‹©çš„æ–¹è¨€ç±»å‹\r\n\t\t\t\tshowLanguagePicker: false, // æ˜¯å¦æ˜¾ç¤ºè¯­è¨€é€‰æ‹©å™¨\r\n\t\t\t\tpendingRecordingType: null, // å¾…å½•éŸ³çš„ç±»å‹ï¼ˆç”¨äºè¯­è¨€é€‰æ‹©åï¼‰\r\n\t\t\t\tlanguageList: [], // è¯­è¨€åˆ—è¡¨\r\n\t\t\t\trealTimeText: '', // å®æ—¶è¯†åˆ«çš„æ–‡æœ¬\r\n\t\t\t\trecognizeTimer: null, // å®æ—¶è¯†åˆ«å®šæ—¶å™¨\r\n\t\t\t\tlastRecognizeTime: 0, // ä¸Šæ¬¡è¯†åˆ«æ—¶é—´\r\n\t\t\t\taiAnalysisResults: [], // AIåˆ†æç»“æœåˆ—è¡¨\r\n\t\t\t\tshowSelectDropdown: false, // æ˜¯å¦æ˜¾ç¤ºä¸‹æ‹‰é€‰æ‹©å™¨\r\n\t\t\t\ttypingTimer: null // æ‰“å­—æœºæ•ˆæœå®šæ—¶å™¨\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// åˆå§‹åŒ–è¯­è¨€åˆ—è¡¨\r\n\t\t\tthis.languageList = Object.keys(baiduSpeech.LANGUAGE_CODES || {});\r\n\t\t\tconsole.log('è¯­è¨€åˆ—è¡¨å·²åˆå§‹åŒ–:', this.languageList);\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\t// æ£€æŸ¥ç™»å½•çŠ¶æ€\r\n\t\t\tif (!checkLogin()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// ä¼˜å…ˆä» URL å‚æ•°è·å–è‰ç¨¿ IDï¼ˆå…¼å®¹å¤§å°å†™ï¼‰\r\n\t\t\tlet draftId = options.draftId || options.draftid;\r\n\r\n\t\t\t// å¦‚æœæ²¡æœ‰ URL å‚æ•°ï¼Œå°è¯•ä»æœ¬åœ°å­˜å‚¨è·å–ï¼ˆç”¨äºä»è‰ç¨¿ç®±è·³è½¬ï¼‰\r\n\t\t\tif (!draftId) {\r\n\t\t\t\tdraftId = uni.getStorageSync('editDraftId');\r\n\t\t\t\tif (draftId) {\r\n\t\t\t\t\t// è¯»å–åæ¸…é™¤ï¼Œé¿å…ä¸‹æ¬¡è¿›å…¥æ—¶è¯¯åŠ è½½\r\n\t\t\t\t\tuni.removeStorageSync('editDraftId');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (draftId) {\r\n\t\t\t\tthis.loadDraft(draftId);\r\n\t\t\t}\r\n\r\n\t\t\t// åŠ è½½å…¨å±€è®¾ç½®\r\n\t\t\tthis.largeFontMode = userStore.state.largeFontMode;\r\n\t\t\tthis.fontSize = userStore.state.fontSize;\r\n\r\n\t\t\t// æ ¹æ®åœºæ™¯ç±»å‹åˆå§‹åŒ–å ä½ç¬¦\r\n\t\t\tthis.updatePlaceholders(this.formData.service_type);\r\n\r\n\t\t\t// è·å–å®šä½\r\n\t\t\tthis.getLocation();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * åˆ‡æ¢ä¸‹æ‹‰é€‰æ‹©å™¨æ˜¾ç¤ºçŠ¶æ€\r\n\t\t\t */\r\n\t\t\ttoggleSelectDropdown(e) {\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t\tthis.showSelectDropdown = !this.showSelectDropdown;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * å…³é—­ä¸‹æ‹‰é€‰æ‹©å™¨\r\n\t\t\t */\r\n\t\t\tcloseSelectDropdown() {\r\n\t\t\t\tthis.showSelectDropdown = false;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * é€‰æ‹©åœºæ™¯ç±»å‹\r\n\t\t\t */\r\n\t\t\tselectScene(value) {\r\n\t\t\t\tthis.formData.service_type = value;\r\n\t\t\t\t// æ ¹æ®åœºæ™¯ç±»å‹è‡ªåŠ¨å¡«å……å ä½ç¬¦\r\n\t\t\t\tthis.updatePlaceholders(value);\r\n\t\t\t\t// å…³é—­ä¸‹æ‹‰é€‰æ‹©å™¨\r\n\t\t\t\tthis.showSelectDropdown = false;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * è·å–é€‰ä¸­çš„åœºæ™¯æ ‡ç­¾\r\n\t\t\t */\r\n\t\t\tgetSelectedSceneLabel() {\r\n\t\t\t\tconst scene = this.sceneTypes.find(s => s.value === this.formData.service_type);\r\n\t\t\t\treturn scene ? scene.label : '';\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * å¼€å§‹è¯­éŸ³è¾“å…¥ï¼ˆæ¨¡æ‹Ÿæ‰“å­—æœºæ•ˆæœï¼‰\r\n\t\t\t */\r\n\t\t\tasync startVoiceInput(type) {\r\n\t\t\t\t// å¦‚æœæ­£åœ¨å½•éŸ³ï¼Œåˆ™åœæ­¢å½•éŸ³\r\n\t\t\t\tif (this.recordingType === type) {\r\n\t\t\t\t\tthis.stopVoiceInput();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// å¦‚æœæ­£åœ¨å…¶ä»–å­—æ®µå½•éŸ³ï¼Œå…ˆåœæ­¢\r\n\t\t\t\tif (this.recordingType && this.recordingType !== type) {\r\n\t\t\t\t\tthis.stopVoiceInput();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// è®¾ç½®å½•éŸ³çŠ¶æ€\r\n\t\t\t\tthis.recordingType = type;\r\n\r\n\t\t\t\t// æ ¹æ®ç±»å‹è®¾ç½®é»˜è®¤æ–‡æœ¬\r\n\t\t\t\tlet defaultText = '';\r\n\t\t\t\tif (type === 'title') {\r\n\t\t\t\t\tdefaultText = 'ç”µåŠ›';\r\n\t\t\t\t} else if (type === 'description') {\r\n\t\t\t\t\tdefaultText = 'æ”¹é€ ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// æ¸…ç©ºå½“å‰å†…å®¹\r\n\t\t\t\tif (type === 'title') {\r\n\t\t\t\t\tthis.formData.title = '';\r\n\t\t\t\t} else if (type === 'description') {\r\n\t\t\t\t\tthis.formData.description = '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// æ˜¾ç¤ºå½•éŸ³æç¤º\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'æ­£åœ¨å½•éŸ³è½¬æ–‡å­—...',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// å»¶è¿Ÿä¸€ä¸‹å†å¼€å§‹æ‰“å­—æœºæ•ˆæœï¼Œæ¨¡æ‹Ÿå½•éŸ³è¯†åˆ«æ—¶é—´\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.startTypingEffect(type, defaultText);\r\n\t\t\t\t}, 1500);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * æ‰“å­—æœºæ•ˆæœ\r\n\t\t\t */\r\n\t\t\tstartTypingEffect(type, fullText) {\r\n\t\t\t\tconst self = this;\r\n\t\t\t\tlet index = 0;\r\n\t\t\t\tconst speed = 150; // æ¯ä¸ªå­—ç¬¦çš„æ˜¾ç¤ºé—´éš”ï¼ˆæ¯«ç§’ï¼‰\r\n\r\n\t\t\t\t// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨\r\n\t\t\t\tif (self.typingTimer) {\r\n\t\t\t\t\tclearInterval(self.typingTimer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.typingTimer = setInterval(() => {\r\n\t\t\t\t\tif (index < fullText.length) {\r\n\t\t\t\t\t\t// é€å­—æ˜¾ç¤º\r\n\t\t\t\t\t\tconst displayText = fullText.substring(0, index + 1);\r\n\t\t\t\t\t\tif (type === 'title') {\r\n\t\t\t\t\t\t\tself.formData.title = displayText;\r\n\t\t\t\t\t\t} else if (type === 'description') {\r\n\t\t\t\t\t\t\tself.formData.description = displayText;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// å®Œæˆæ‰“å­—\r\n\t\t\t\t\t\tclearInterval(self.typingTimer);\r\n\t\t\t\t\t\tself.typingTimer = null;\r\n\t\t\t\t\t\t// åœæ­¢å½•éŸ³çŠ¶æ€\r\n\t\t\t\t\t\tself.recordingType = null;\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'è¯†åˆ«å®Œæˆ',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, speed);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * å¼€å§‹å½•éŸ³\r\n\t\t\t */\r\n\t\t\tasync startRecording(type) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconsole.log('å¼€å§‹å½•éŸ³ï¼Œç±»å‹:', type);\r\n\t\t\t\t\tthis.recordingType = type;\r\n\t\t\t\t\tthis.recordingTime = 0;\r\n\t\t\t\t\tthis.realTimeText = ''; // æ¸…ç©ºå®æ—¶æ–‡æœ¬\r\n\t\t\t\t\tthis.lastRecognizeTime = 0;\r\n\r\n\t\t\t\t\t// ä¿å­˜å½“å‰è¾“å…¥æ¡†çš„å†…å®¹ä½œä¸ºåˆå§‹æ–‡æœ¬\r\n\t\t\t\t\tif (type === 'title') {\r\n\t\t\t\t\t\tthis.realTimeText = this.formData.title || '';\r\n\t\t\t\t\t} else if (type === 'description') {\r\n\t\t\t\t\t\tthis.realTimeText = this.formData.description || '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// å…ˆåˆ›å»ºå½•éŸ³ç®¡ç†å™¨\r\n\t\t\t\t\tthis.recorderManager = await baiduSpeech.startRecord({\r\n\t\t\t\t\t\tduration: 60000 // æœ€é•¿60ç§’\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tconsole.log('å½•éŸ³ç®¡ç†å™¨åˆ›å»ºæˆåŠŸ');\r\n\r\n\t\t\t\t\t// å¼€å§‹å®æ—¶è¯†åˆ«ï¼ˆæ¯4ç§’è¯†åˆ«ä¸€æ¬¡ï¼‰\r\n\t\t\t\t\tthis.startRealTimeRecognize(type);\r\n\r\n\t\t\t\t\t// å¼€å§‹è®¡æ—¶\r\n\t\t\t\t\tthis.recordingTimer = setInterval(() => {\r\n\t\t\t\t\t\tthis.recordingTime++;\r\n\t\t\t\t\t\tif (this.recordingTime >= 60) {\r\n\t\t\t\t\t\t\tthis.stopVoiceInput();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 1000);\r\n\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'æ­£åœ¨å½•éŸ³ï¼Œå®æ—¶è½¬æ–‡å­—ä¸­...',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('å¼€å§‹å½•éŸ³å¤±è´¥:', error);\r\n\t\t\t\t\t// æ¸…ç†çŠ¶æ€\r\n\t\t\t\t\tthis.recordingType = null;\r\n\t\t\t\t\tthis.recorderManager = null;\r\n\t\t\t\t\tif (this.recordingTimer) {\r\n\t\t\t\t\t\tclearInterval(this.recordingTimer);\r\n\t\t\t\t\t\tthis.recordingTimer = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.recognizeTimer) {\r\n\t\t\t\t\t\tclearInterval(this.recognizeTimer);\r\n\t\t\t\t\t\tthis.recognizeTimer = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'å½•éŸ³å¤±è´¥ï¼š' + (error.message || 'è¯·æ£€æŸ¥éº¦å…‹é£æƒé™'),\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * å¼€å§‹å®æ—¶è¯†åˆ«\r\n\t\t\t */\r\n\t\t\tasync startRealTimeRecognize(type) {\r\n\t\t\t\tconsole.log('å¯åŠ¨å®æ—¶è¯†åˆ«ï¼Œç±»å‹:', type);\r\n\r\n\t\t\t\t// ç¬¬ä¸€æ¬¡è¯†åˆ«ï¼šå»¶è¿Ÿ5ç§’\r\n\t\t\t\tsetTimeout(async () => {\r\n\t\t\t\t\tawait this.performRealTimeRecognize(type);\r\n\r\n\t\t\t\t\t// ä¹‹åæ¯5ç§’è¯†åˆ«ä¸€æ¬¡ï¼ˆç¡®ä¿æ¯æ¬¡éƒ½æœ‰è¶³å¤Ÿçš„éŸ³é¢‘æ•°æ®ï¼‰\r\n\t\t\t\t\tthis.recognizeTimer = setInterval(async () => {\r\n\t\t\t\t\t\tawait this.performRealTimeRecognize(type);\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t}, 5000); // å»¶è¿Ÿ5ç§’åå¼€å§‹ç¬¬ä¸€æ¬¡è¯†åˆ«\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * æ‰§è¡Œå®æ—¶è¯†åˆ«\r\n\t\t\t */\r\n\t\t\tasync performRealTimeRecognize(type) {\r\n\t\t\t\tif (!this.recorderManager || !this.recordingType || this.recordingType !== type) {\r\n\t\t\t\t\tconsole.log('è·³è¿‡è¯†åˆ«ï¼šå½•éŸ³ç®¡ç†å™¨ä¸å­˜åœ¨æˆ–ç±»å‹ä¸åŒ¹é…');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// å¦‚æœå½•éŸ³æ—¶é—´å°‘äº5ç§’ï¼Œè·³è¿‡è¯†åˆ«ï¼ˆéŸ³é¢‘å¤ªçŸ­ï¼Œç™¾åº¦APIéœ€è¦è¶³å¤Ÿçš„éŸ³é¢‘æ•°æ®ï¼‰\r\n\t\t\t\tif (this.recordingTime < 5) {\r\n\t\t\t\t\tconsole.log('è·³è¿‡è¯†åˆ«ï¼šå½•éŸ³æ—¶é—´å¤ªçŸ­', this.recordingTime, 'ç§’ï¼Œéœ€è¦è‡³å°‘5ç§’');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconsole.log('å¼€å§‹å®æ—¶è¯†åˆ«ï¼Œå½•éŸ³æ—¶é•¿:', this.recordingTime, 'ç§’');\r\n\r\n\t\t\t\t\t// ä¿å­˜å½“å‰å½•éŸ³ç®¡ç†å™¨\r\n\t\t\t\t\tconst currentRecorder = this.recorderManager;\r\n\r\n\t\t\t\t\t// åœæ­¢å½“å‰å½•éŸ³å¹¶è·å–éŸ³é¢‘æ–‡ä»¶\r\n\t\t\t\t\tconst audioPath = await baiduSpeech.stopRecord(currentRecorder);\r\n\t\t\t\t\tconsole.log('å½•éŸ³æ–‡ä»¶è·¯å¾„:', audioPath);\r\n\r\n\t\t\t\t\t// è¯†åˆ«éŸ³é¢‘\r\n\t\t\t\t\tconst result = await baiduSpeech.recognizeSpeech(audioPath, this.selectedLanguage);\r\n\t\t\t\t\tconsole.log('è¯†åˆ«ç»“æœ:', result);\r\n\r\n\t\t\t\t\tif (result && result.trim()) {\r\n\t\t\t\t\t\t// è¿½åŠ è¯†åˆ«ç»“æœ\r\n\t\t\t\t\t\tif (this.realTimeText) {\r\n\t\t\t\t\t\t\tthis.realTimeText += ' ' + result;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.realTimeText = result;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// å®æ—¶æ›´æ–°åˆ°è¾“å…¥æ¡†\r\n\t\t\t\t\t\tif (type === 'title') {\r\n\t\t\t\t\t\t\tthis.formData.title = this.realTimeText;\r\n\t\t\t\t\t\t} else if (type === 'description') {\r\n\t\t\t\t\t\t\tthis.formData.description = this.realTimeText;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconsole.log('å®æ—¶è¯†åˆ«ç»“æœ:', result);\r\n\t\t\t\t\t\tconsole.log('ç´¯è®¡æ–‡æœ¬:', this.realTimeText);\r\n\r\n\t\t\t\t\t\t// æ˜¾ç¤ºè¯†åˆ«æˆåŠŸçš„æç¤º\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'è¯†åˆ«ä¸­...',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('è¯†åˆ«ç»“æœä¸ºç©º');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// é‡æ–°å¼€å§‹å½•éŸ³ï¼ˆæ— ç¼ç»§ç»­ï¼‰\r\n\t\t\t\t\tif (this.recordingType === type) {\r\n\t\t\t\t\t\tthis.recorderManager = await baiduSpeech.startRecord({\r\n\t\t\t\t\t\t\tduration: 60000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log('å½•éŸ³å·²ç»§ç»­');\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('å®æ—¶è¯†åˆ«å¤±è´¥:', error);\r\n\t\t\t\t\tconsole.error('é”™è¯¯è¯¦æƒ…:', error.message);\r\n\t\t\t\t\tif (error.stack) {\r\n\t\t\t\t\t\tconsole.error('é”™è¯¯å †æ ˆ:', error.stack);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// å¦‚æœæ˜¯éŸ³é¢‘æ–‡ä»¶å¤ªå°çš„é—®é¢˜ï¼Œä¸æ˜¾ç¤ºé”™è¯¯ï¼Œç»§ç»­å½•éŸ³\r\n\t\t\t\t\tif (error.message && error.message.includes('å¤ªå°')) {\r\n\t\t\t\t\t\tconsole.log('éŸ³é¢‘æ–‡ä»¶å¤ªå°ï¼Œè·³è¿‡æ­¤æ¬¡è¯†åˆ«ï¼Œç»§ç»­å½•éŸ³');\r\n\t\t\t\t\t\t// é‡æ–°å¼€å§‹å½•éŸ³\r\n\t\t\t\t\t\tif (this.recordingType === type) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tthis.recorderManager = await baiduSpeech.startRecord({\r\n\t\t\t\t\t\t\t\t\tduration: 60000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tconsole.log('å½•éŸ³å·²ç»§ç»­ï¼ˆéŸ³é¢‘å¤ªå°è·³è¿‡è¯†åˆ«ï¼‰');\r\n\t\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\t\tconsole.error('é‡æ–°å¼€å§‹å½•éŸ³å¤±è´¥:', err);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// å…¶ä»–é”™è¯¯ï¼Œå°è¯•ç»§ç»­å½•éŸ³\r\n\t\t\t\t\tif (this.recordingType === type) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tthis.recorderManager = await baiduSpeech.startRecord({\r\n\t\t\t\t\t\t\t\tduration: 60000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconsole.log('å½•éŸ³å·²é‡æ–°å¼€å§‹');\r\n\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\tconsole.error('é‡æ–°å¼€å§‹å½•éŸ³å¤±è´¥:', err);\r\n\t\t\t\t\t\t\t// å¦‚æœé‡æ–°å¼€å§‹å¤±è´¥ï¼Œåœæ­¢å½•éŸ³\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: 'å½•éŸ³ä¸­æ–­: ' + (error.message || 'è¯·é‡è¯•'),\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.stopVoiceInput();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * åœæ­¢è¯­éŸ³è¾“å…¥\r\n\t\t\t */\r\n\t\t\tasync stopVoiceInput() {\r\n\t\t\t\t// æ¸…é™¤æ‰“å­—æœºå®šæ—¶å™¨\r\n\t\t\t\tif (this.typingTimer) {\r\n\t\t\t\t\tclearInterval(this.typingTimer);\r\n\t\t\t\t\tthis.typingTimer = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// æ¸…é™¤å½•éŸ³ç›¸å…³å®šæ—¶å™¨\r\n\t\t\t\tif (this.recordingTimer) {\r\n\t\t\t\t\tclearInterval(this.recordingTimer);\r\n\t\t\t\t\tthis.recordingTimer = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.recognizeTimer) {\r\n\t\t\t\t\tclearInterval(this.recognizeTimer);\r\n\t\t\t\t\tthis.recognizeTimer = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// é‡ç½®çŠ¶æ€\r\n\t\t\t\tthis.recordingType = null;\r\n\t\t\t\tthis.recorderManager = null;\r\n\t\t\t\tthis.recordingTime = 0;\r\n\t\t\t\tthis.realTimeText = '';\r\n\t\t\t\tthis.lastRecognizeTime = 0;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * é€‰æ‹©è¯­è¨€\r\n\t\t\t */\r\n\t\t\tasync selectLanguage(lang) {\r\n\t\t\t\tconsole.log('é€‰æ‹©è¯­è¨€æ–¹æ³•è¢«è°ƒç”¨ï¼Œè¯­è¨€:', lang);\r\n\t\t\t\tthis.selectedLanguage = lang;\r\n\t\t\t\tthis.showLanguagePicker = false;\r\n\t\t\t\tconst type = this.pendingRecordingType;\r\n\t\t\t\tthis.pendingRecordingType = null;\r\n\r\n\t\t\t\tconsole.log('ç”¨æˆ·é€‰æ‹©äº†è¯­è¨€:', lang, 'å¾…å½•éŸ³ç±»å‹:', type);\r\n\t\t\t\tif (type) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconsole.log('å‡†å¤‡å¼€å§‹å½•éŸ³ï¼Œç±»å‹:', type);\r\n\t\t\t\t\t\tawait this.startRecording(type);\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.error('å¼€å§‹å½•éŸ³å¤±è´¥:', error);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'å¯åŠ¨å¤±è´¥ï¼š' + (error.message || 'è¯·é‡è¯•'),\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * å…³é—­è¯­è¨€é€‰æ‹©å™¨\r\n\t\t\t */\r\n\t\t\tcloseLanguagePicker() {\r\n\t\t\t\tthis.showLanguagePicker = false;\r\n\t\t\t\tthis.pendingRecordingType = null;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * è·å–åœºæ™¯å›¾æ ‡\r\n\t\t\t */\r\n\t\t\tgetSceneIcon(sceneType) {\r\n\t\t\t\tconst icons = {\r\n\t\t\t\t\t1: 'ğŸ ',\r\n\t\t\t\t\t2: 'ğŸ”§',\r\n\t\t\t\t\t3: 'âš™ï¸',\r\n\t\t\t\t\t4: 'âš ï¸'\r\n\t\t\t\t};\r\n\t\t\t\treturn icons[sceneType] || 'âš¡';\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * æ ¹æ®åœºæ™¯ç±»å‹æ›´æ–°å ä½ç¬¦\r\n\t\t\t */\r\n\t\t\tupdatePlaceholders(sceneType) {\r\n\t\t\t\tconst placeholders = {\r\n\t\t\t\t\t1: {\r\n\t\t\t\t\t\ttitle: 'ä¾‹å¦‚ï¼šå®¶åº­ç”µè·¯æ”¹é€ å‡çº§',\r\n\t\t\t\t\t\tdesc: 'è¯·æè¿°æˆ¿å±‹é¢ç§¯ã€ç°æœ‰ç”µè·¯æƒ…å†µã€éœ€è¦æ”¹é€ çš„åŒºåŸŸåŠæœŸæœ›å®Œæˆæ—¶é—´'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t2: {\r\n\t\t\t\t\t\ttitle: 'ä¾‹å¦‚ï¼šç”µè·¯è·³é—¸éœ€è¦ç»´ä¿®',\r\n\t\t\t\t\t\tdesc: 'è¯·æè¿°æ•…éšœç°è±¡ã€å‘ç”Ÿé¢‘ç‡ã€å½±å“èŒƒå›´åŠæœŸæœ›ç»´ä¿®æ—¶é—´'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t3: {\r\n\t\t\t\t\t\ttitle: 'ä¾‹å¦‚ï¼šç©ºè°ƒç”µè·¯ç»´æŠ¤ä¿å…»',\r\n\t\t\t\t\t\tdesc: 'è¯·æè¿°éœ€è¦ç»´æŠ¤çš„ç”µå™¨ç±»å‹ã€ä½¿ç”¨å¹´é™ã€å½“å‰é—®é¢˜åŠæœŸæœ›ç»´æŠ¤æ—¶é—´'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t4: {\r\n\t\t\t\t\t\ttitle: 'ä¾‹å¦‚ï¼šç”¨ç”µæ•…éšœç´§æ€¥æ’é™¤',\r\n\t\t\t\t\t\tdesc: 'è¯·æè¿°æ•…éšœç°è±¡ã€ç´§æ€¥ç¨‹åº¦ã€å·²å°è¯•çš„è§£å†³æ–¹æ³•åŠæœŸæœ›å“åº”æ—¶é—´'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst placeholder = placeholders[sceneType] || placeholders[1];\r\n\t\t\t\tthis.placeholderTitle = placeholder.title;\r\n\t\t\t\tthis.placeholderDesc = placeholder.desc;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * è¿”å›ä¸Šä¸€é¡µ\r\n\t\t\t */\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1,\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * é€‰æ‹©åœ°å€\r\n\t\t\t */\r\n\t\t\tselectAddress() {\r\n\t\t\t\tuni.chooseLocation({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.formData.address = res.address;\r\n\t\t\t\t\t\tthis.formData.lng = res.longitude;\r\n\t\t\t\t\t\tthis.formData.lat = res.latitude;\r\n\r\n\t\t\t\t\t\t// ä¿å­˜åˆ°å¸¸ç”¨åœ°å€\r\n\t\t\t\t\t\toffline.userAddress.save({\r\n\t\t\t\t\t\t\taddress: res.address,\r\n\t\t\t\t\t\t\tlng: res.longitude,\r\n\t\t\t\t\t\t\tlat: res.latitude\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('é€‰æ‹©åœ°å€å¤±è´¥', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'é€‰æ‹©åœ°å€å¤±è´¥',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * è·å–å®šä½\r\n\t\t\t */\r\n\t\t\tgetLocation() {\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02',\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\tthis.formData.lng = res.longitude;\r\n\t\t\t\t\t\tthis.formData.lat = res.latitude;\r\n\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconst geo = await reverseGeocode(res.longitude, res.latitude);\r\n\t\t\t\t\t\t\tif (geo.address) {\r\n\t\t\t\t\t\t\t\tthis.formData.address = geo.address;\r\n\t\t\t\t\t\t\t} else if (!this.formData.address) {\r\n\t\t\t\t\t\t\t\tthis.formData.address = 'å®šä½æˆåŠŸï¼Œåœ°å€è§£æå¤±è´¥';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (geo.pois && geo.pois.length) {\r\n\t\t\t\t\t\t\t\tconst poi = geo.pois[0];\r\n\t\t\t\t\t\t\t\tthis.formData.address = poi.name ? `${geo.address || ''}ï¼ˆ${poi.name}ï¼‰` : geo\r\n\t\t\t\t\t\t\t\t\t.address;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (geoErr) {\r\n\t\t\t\t\t\t\tconsole.error('é«˜å¾·é€†åœ°ç†ç¼–ç å¤±è´¥', geoErr);\r\n\t\t\t\t\t\t\tconst errorMsg = geoErr.message || geoErr.toString();\r\n\t\t\t\t\t\t\t// å¦‚æœæ˜¯Keyé…ç½®é—®é¢˜ï¼Œç»™å‡ºæç¤º\r\n\t\t\t\t\t\t\tif (errorMsg.includes('USERKEY_PLAT_NOMATCH') || errorMsg.includes('å¹³å°ä¸åŒ¹é…')) {\r\n\t\t\t\t\t\t\t\tconsole.warn(\r\n\t\t\t\t\t\t\t\t\t'è¯·é…ç½®æ­£ç¡®çš„é«˜å¾·åœ°å›¾API Keyï¼š1.ä½¿ç”¨WebæœåŠ¡ç±»å‹Keyï¼›2.åœ¨å¾®ä¿¡å°ç¨‹åºåå°é…ç½®requeståˆæ³•åŸŸåï¼šhttps://restapi.amap.com'\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!this.formData.address) {\r\n\t\t\t\t\t\t\t\tthis.formData.address = 'å®šä½æˆåŠŸï¼Œæœªè·å–åˆ°è¯¦ç»†åœ°å€';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('è·å–å®šä½å¤±è´¥', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'è·å–å®šä½å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©åœ°å€',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * é€‰æ‹©ç…§ç‰‡\r\n\t\t\t */\r\n\t\t\tasync choosePhoto() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\t\tcount: 9 - this.formData.photos.length,\r\n\t\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\ttitle: 'ä¸Šä¼ ä¸­...'\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t// å¯¼å…¥ä¸Šä¼ å·¥å…·\r\n\t\t\t\t\t\t\t\tconst upload = (await import('@/utils/upload.js')).default;\r\n\r\n\t\t\t\t\t\t\t\t// ä¸Šä¼ å›¾ç‰‡åˆ°æœåŠ¡å™¨\r\n\t\t\t\t\t\t\t\tconst urls = await upload.uploadImages(res.tempFilePaths);\r\n\r\n\t\t\t\t\t\t\t\t// æ·»åŠ åˆ°è¡¨å•æ•°æ®ï¼ˆæ·»åŠ AIåˆ†æçŠ¶æ€ï¼‰\r\n\t\t\t\t\t\t\t\tconst photosWithAI = urls.map(url => ({\r\n\t\t\t\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\t\t\t\taiAnalyzing: false,\r\n\t\t\t\t\t\t\t\t\taiResult: null\r\n\t\t\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t\t\t\t// å¦‚æœä¹‹å‰æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œè½¬æ¢ä¸ºå¯¹è±¡æ•°ç»„\r\n\t\t\t\t\t\t\t\tconst existingPhotos = this.formData.photos.map(photo =>\r\n\t\t\t\t\t\t\t\t\ttypeof photo === 'string' ? {\r\n\t\t\t\t\t\t\t\t\t\turl: photo,\r\n\t\t\t\t\t\t\t\t\t\taiAnalyzing: false,\r\n\t\t\t\t\t\t\t\t\t\taiResult: null\r\n\t\t\t\t\t\t\t\t\t} : photo\r\n\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\tthis.formData.photos = existingPhotos.concat(photosWithAI);\r\n\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: 'ä¸Šä¼ æˆåŠŸ',\r\n\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tconsole.error('ä¸Šä¼ å¤±è´¥', error);\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: 'ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// ä¸Šä¼ å¤±è´¥æ—¶ï¼Œä½¿ç”¨æœ¬åœ°è·¯å¾„ä½œä¸ºå¤‡ç”¨\r\n\t\t\t\t\t\t\t\tconst photosWithAI = res.tempFilePaths.map(path => ({\r\n\t\t\t\t\t\t\t\t\turl: path,\r\n\t\t\t\t\t\t\t\t\taiAnalyzing: false,\r\n\t\t\t\t\t\t\t\t\taiResult: null\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\tconst existingPhotos = this.formData.photos.map(photo =>\r\n\t\t\t\t\t\t\t\t\ttypeof photo === 'string' ? {\r\n\t\t\t\t\t\t\t\t\t\turl: photo,\r\n\t\t\t\t\t\t\t\t\t\taiAnalyzing: false,\r\n\t\t\t\t\t\t\t\t\t\taiResult: null\r\n\t\t\t\t\t\t\t\t\t} : photo\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tthis.formData.photos = existingPhotos.concat(photosWithAI);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('é€‰æ‹©å›¾ç‰‡å¤±è´¥', error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * AIåˆ†æç…§ç‰‡\r\n\t\t\t */\r\n\t\t\tasync analyzePhoto(index) {\r\n\t\t\t\tconst photo = this.formData.photos[index];\r\n\t\t\t\tif (!photo) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// æ£€æŸ¥æ˜¯å¦æ­£åœ¨åˆ†æ\r\n\t\t\t\tif (this.getPhotoAIStatus(photo, 'analyzing')) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// è·å–ç…§ç‰‡URLï¼ˆå…¼å®¹å­—ç¬¦ä¸²å’Œå¯¹è±¡æ ¼å¼ï¼‰\r\n\t\t\t\tconst photoUrl = this.getPhotoUrl(photo);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// è®¾ç½®åˆ†æçŠ¶æ€\r\n\t\t\t\t\tif (typeof photo === 'object') {\r\n\t\t\t\t\t\tthis.$set(this.formData.photos[index], 'aiAnalyzing', true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$set(this.formData.photos, index, {\r\n\t\t\t\t\t\t\turl: photoUrl,\r\n\t\t\t\t\t\t\taiAnalyzing: true,\r\n\t\t\t\t\t\t\taiResult: null\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: 'AIåˆ†æä¸­...'\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// è°ƒç”¨AIåˆ†æAPI\r\n\t\t\t\t\tconst result = await request.post('/api/ai/analyze-image', {\r\n\t\t\t\t\t\timageUrl: photoUrl\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tuni.hideLoading();\r\n\r\n\t\t\t\t\t// æ›´æ–°ç…§ç‰‡çŠ¶æ€\r\n\t\t\t\t\tconst updatedPhoto = this.formData.photos[index];\r\n\t\t\t\t\tif (typeof updatedPhoto === 'object') {\r\n\t\t\t\t\t\tthis.$set(this.formData.photos[index], 'aiAnalyzing', false);\r\n\t\t\t\t\t\tthis.$set(this.formData.photos[index], 'aiResult', result);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// æ·»åŠ åˆ°åˆ†æç»“æœåˆ—è¡¨\r\n\t\t\t\t\tthis.aiAnalysisResults.push({\r\n\t\t\t\t\t\tphotoUrl: photoUrl,\r\n\t\t\t\t\t\tanalysis: result.analysis || 'æœªè¯†åˆ«åˆ°æ˜æ˜¾é—®é¢˜',\r\n\t\t\t\t\t\tsolution: result.solution || 'å»ºè®®è”ç³»ä¸“ä¸šç”µå·¥è¿›è¡Œç°åœºæ£€æŸ¥',\r\n\t\t\t\t\t\ttime: new Date().toLocaleTimeString()\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// å¦‚æœAIåˆ†æç»“æœä¸­æœ‰å»ºè®®ï¼Œè‡ªåŠ¨å¡«å……åˆ°æè¿°ä¸­\r\n\t\t\t\t\tif (result.solution && !this.formData.description) {\r\n\t\t\t\t\t\tthis.formData.description = `AIåˆ†æå»ºè®®ï¼š${result.solution}`;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'åˆ†æå®Œæˆ',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('AIåˆ†æå¤±è´¥', error);\r\n\t\t\t\t\tuni.hideLoading();\r\n\r\n\t\t\t\t\t// é‡ç½®åˆ†æçŠ¶æ€\r\n\t\t\t\t\tconst updatedPhoto = this.formData.photos[index];\r\n\t\t\t\t\tif (typeof updatedPhoto === 'object') {\r\n\t\t\t\t\t\tthis.$set(this.formData.photos[index], 'aiAnalyzing', false);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'åˆ†æå¤±è´¥ï¼š' + (error.message || 'è¯·é‡è¯•'),\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * è·å–ç…§ç‰‡URLï¼ˆå…¼å®¹å­—ç¬¦ä¸²å’Œå¯¹è±¡æ ¼å¼ï¼‰\r\n\t\t\t */\r\n\t\t\tgetPhotoUrl(photo) {\r\n\t\t\t\treturn typeof photo === 'string' ? photo : photo.url;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * è·å–ç…§ç‰‡AIçŠ¶æ€\r\n\t\t\t */\r\n\t\t\tgetPhotoAIStatus(photo, type) {\r\n\t\t\t\tif (typeof photo === 'string') {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 'analyzing') {\r\n\t\t\t\t\treturn photo.aiAnalyzing || false;\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 'result') {\r\n\t\t\t\t\treturn photo.aiResult || false;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * åˆ é™¤ç…§ç‰‡\r\n\t\t\t */\r\n\t\t\tremovePhoto(index) {\r\n\t\t\t\tconst photo = this.formData.photos[index];\r\n\t\t\t\tconst photoUrl = this.getPhotoUrl(photo);\r\n\r\n\t\t\t\t// åˆ é™¤å¯¹åº”çš„AIåˆ†æç»“æœ\r\n\t\t\t\tthis.aiAnalysisResults = this.aiAnalysisResults.filter(result => result.photoUrl !== photoUrl);\r\n\r\n\t\t\t\tthis.formData.photos.splice(index, 1);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * ä¿å­˜è‰ç¨¿\r\n\t\t\t */\r\n\t\t\tsaveDraft() {\r\n\t\t\t\tif (!this.formData.title && !this.formData.description) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'è¯·è‡³å°‘å¡«å†™æ ‡é¢˜æˆ–æè¿°',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst localId = offline.draftDemand.save(this.formData);\r\n\t\t\t\tthis.formData.offline_local_id = localId;\r\n\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'è‰ç¨¿å·²ä¿å­˜',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// ä¿å­˜è‰ç¨¿åè¿”å›ä¸Šä¸€é¡µ\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\tdelta: 1,\r\n\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 800);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * åŠ è½½è‰ç¨¿\r\n\t\t\t */\r\n\t\t\tloadDraft(draftId) {\r\n\t\t\t\tconst draft = offline.draftDemand.getById(draftId);\r\n\t\t\t\tif (draft) {\r\n\t\t\t\t\tthis.formData = {\r\n\t\t\t\t\t\t...draft\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * æäº¤éœ€æ±‚\r\n\t\t\t */\r\n\t\t\tasync submitDemand() {\r\n\t\t\t\t// æ£€æŸ¥ç™»å½•çŠ¶æ€\r\n\t\t\t\tif (!checkLogin()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// è¡¨å•éªŒè¯\r\n\t\t\t\tif (!this.formData.title || this.formData.title.trim() === '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'è¯·è¾“å…¥éœ€æ±‚æ ‡é¢˜',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.formData.description || this.formData.description.trim() === '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'è¯·è¾“å…¥è¯¦ç»†æè¿°',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ç¡®ä¿ service_type æœ‰å€¼\r\n\t\t\t\tif (this.formData.service_type === undefined || this.formData.service_type === null) {\r\n\t\t\t\t\tthis.formData.service_type = 1; // é»˜è®¤å€¼\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// åŠŸç‡éœ€æ±‚æ”¹ä¸ºå¯é€‰ï¼Œå¦‚æœæ²¡æœ‰å¡«å†™åˆ™é»˜è®¤ä¸º0\r\n\t\t\t\tif (this.formData.power_kw && parseFloat(this.formData.power_kw) < 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'åŠŸç‡éœ€æ±‚ä¸èƒ½ä¸ºè´Ÿæ•°',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.formData.address || !this.formData.lng || !this.formData.lat) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'è¯·é€‰æ‹©æ–½å·¥åœ°å€',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.submitting = true;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// å¦‚æœæœ‰æœ¬åœ°è‰ç¨¿ IDï¼Œä½¿ç”¨åŒæ­¥æ¥å£\r\n\t\t\t\t\tconst url = this.formData.offline_local_id ? '/api/demand/sync' : '/api/demand/create';\r\n\r\n\t\t\t\t\t// å¤„ç†ç…§ç‰‡æ•°ç»„ï¼ˆå…¼å®¹å¯¹è±¡å’Œå­—ç¬¦ä¸²æ ¼å¼ï¼‰\r\n\t\t\t\t\tconst photos = (this.formData.photos || []).map(photo =>\r\n\t\t\t\t\t\ttypeof photo === 'string' ? photo : photo.url\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// ä¿å­˜åˆ°MySQLæ•°æ®åº“ï¼Œç¡®ä¿æ‰€æœ‰å¿…è¦å­—æ®µéƒ½å­˜åœ¨\r\n\t\t\t\t\tconst result = await request.post(url, {\r\n\t\t\t\t\t\tservice_type: this.formData.service_type || 1,\r\n\t\t\t\t\t\ttitle: this.formData.title,\r\n\t\t\t\t\t\tdescription: this.formData.description,\r\n\t\t\t\t\t\tpower_kw: parseFloat(this.formData.power_kw) || 0,\r\n\t\t\t\t\t\taddress: this.formData.address,\r\n\t\t\t\t\t\tlng: this.formData.lng,\r\n\t\t\t\t\t\tlat: this.formData.lat,\r\n\t\t\t\t\t\tphotos: photos,\r\n\t\t\t\t\t\toffline_local_id: this.formData.offline_local_id || null\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// æäº¤æˆåŠŸ\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'å‘å¸ƒæˆåŠŸ',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// åˆ é™¤è‰ç¨¿å’ŒåŒæ­¥é˜Ÿåˆ—\r\n\t\t\t\t\tif (this.formData.offline_local_id) {\r\n\t\t\t\t\t\toffline.draftDemand.remove(this.formData.offline_local_id);\r\n\t\t\t\t\t\toffline.syncQueue.remove(this.formData.offline_local_id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// è§¦å‘å…¨å±€äº‹ä»¶ï¼Œé€šçŸ¥è®¢å•åˆ—è¡¨å’Œé¦–é¡µåˆ·æ–°\r\n\t\t\t\t\tuni.$emit('demandCreated', {\r\n\t\t\t\t\t\tdemandId: result.id,\r\n\t\t\t\t\t\ttimestamp: Date.now()\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// æäº¤æˆåŠŸåè¿”å›ä¸Šä¸€é¡µï¼ˆæˆ–é¦–é¡µï¼‰\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\tdelta: 1,\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('æäº¤éœ€æ±‚å¤±è´¥', error);\r\n\t\t\t\t\t// æ˜¾ç¤ºå®é™…çš„é”™è¯¯æ¶ˆæ¯\r\n\t\t\t\t\tconst errorMsg = error.message || 'å‘å¸ƒå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: 'æäº¤å¤±è´¥',\r\n\t\t\t\t\t\tcontent: errorMsg,\r\n\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t// å¤±è´¥æ—¶ä¿å­˜ä¸ºè‰ç¨¿\r\n\t\t\t\t\t\t\tthis.saveDraft();\r\n\t\t\t\t\t\t\toffline.syncQueue.add(this.formData.offline_local_id, 'demand_create');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.submitting = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.container {\r\n\t\tpadding: 0 0 140rpx;\r\n\t\tbackground: linear-gradient(180deg, #fafbfc 0%, #f5f7fa 100%);\r\n\t\tmin-height: 100vh;\r\n\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n\t\tcolor: #1a1a1a;\r\n\t}\r\n\r\n\t.container.large-font {\r\n\t\tfont-size: 18rpx;\r\n\t}\r\n\r\n\t.page-header-row {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 40rpx 32rpx 32rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-bottom: 1rpx solid #e5e7eb;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.02);\r\n\t}\r\n\r\n\t.back-button {\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tborder-radius: 999rpx;\r\n\t\tbackground-color: #e5f3ec;\r\n\t\tcolor: #1f7a4d;\r\n\t}\r\n\r\n\t.back-icon {\r\n\t\tfont-size: 30rpx;\r\n\t\tmargin-right: 6rpx;\r\n\t}\r\n\r\n\t.back-text {\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.page-title {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #111827;\r\n\t\tletter-spacing: -0.5rpx;\r\n\t}\r\n\r\n\t.form-intro {\r\n\t\tbackground: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\r\n\t\tpadding: 40rpx 32rpx;\r\n\t\tmargin: 0;\r\n\t\tborder-bottom: 1rpx solid #e5e7eb;\r\n\t}\r\n\r\n\t.intro-title {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #111827;\r\n\t\tmargin-bottom: 12rpx;\r\n\t\tletter-spacing: -0.3rpx;\r\n\t}\r\n\r\n\t.intro-desc {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #6b7280;\r\n\t\tline-height: 1.6;\r\n\t}\r\n\r\n\t.form-section {\r\n\t\tbackground: #ffffff;\r\n\t\tpadding: 36rpx 32rpx;\r\n\t\tmargin: 0;\r\n\t\tborder-bottom: 1rpx solid #e5e7eb;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.form-section:last-of-type {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t.form-section::before {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\twidth: 4rpx;\r\n\t\tbackground: linear-gradient(180deg, #2563eb 0%, #3b82f6 100%);\r\n\t\topacity: 0;\r\n\t\ttransition: opacity 0.3s ease;\r\n\t}\r\n\r\n\t.form-section:first-of-type::before {\r\n\t\topacity: 1;\r\n\t}\r\n\r\n\t.section-title {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 10rpx;\r\n\t\tmargin-bottom: 24rpx;\r\n\t}\r\n\r\n\t.section-label {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #111827;\r\n\t\tletter-spacing: -0.3rpx;\r\n\t\tposition: relative;\r\n\t\tpadding-left: 16rpx;\r\n\t}\r\n\r\n\t.section-label::before {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateY(-50%);\r\n\t\twidth: 4rpx;\r\n\t\theight: 20rpx;\r\n\t\tbackground: linear-gradient(180deg, #2563eb 0%, #3b82f6 100%);\r\n\t\tborder-radius: 2rpx;\r\n\t}\r\n\r\n\t.section-desc {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #6b7280;\r\n\t\tline-height: 1.7;\r\n\t\tpadding-left: 16rpx;\r\n\t\tmargin-top: 4rpx;\r\n\t}\r\n\r\n\t/* ä¸‹æ‹‰é€‰æ‹©å™¨æ ·å¼ */\r\n\t.select-wrapper {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 28rpx 28rpx;\r\n\t\tborder: 1rpx solid #d1d5db;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tcursor: pointer;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.select-wrapper:active {\r\n\t\tborder-color: #2563eb;\r\n\t\tbackground-color: #f9fafb;\r\n\t}\r\n\r\n\t.select-display {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.select-text {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #111827;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.select-placeholder {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #9ca3af;\r\n\t}\r\n\r\n\t.select-arrow {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\ttransition: transform 0.3s ease;\r\n\t\tmargin-left: 12rpx;\r\n\t}\r\n\r\n\t.select-arrow.open {\r\n\t\ttransform: rotate(180deg);\r\n\t}\r\n\r\n\t.arrow-icon {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #6b7280;\r\n\t\ttransition: color 0.2s ease;\r\n\t}\r\n\r\n\t.select-wrapper:active .arrow-icon {\r\n\t\tcolor: #2563eb;\r\n\t}\r\n\r\n\t.select-dropdown {\r\n\t\tposition: absolute;\r\n\t\ttop: calc(100% + 8rpx);\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbackground: #ffffff;\r\n\t\tborder: 1rpx solid #e5e7eb;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.12);\r\n\t\tz-index: 999;\r\n\t\tmax-height: 400rpx;\r\n\t\toverflow-y: auto;\r\n\t\tanimation: slideDown 0.2s ease;\r\n\t}\r\n\r\n\t@keyframes slideDown {\r\n\t\tfrom {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: translateY(-10rpx);\r\n\t\t}\r\n\r\n\t\tto {\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\t}\r\n\r\n\t.select-option {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 24rpx;\r\n\t\tborder-bottom: 1rpx solid #f3f4f6;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.select-option:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t.select-option:active {\r\n\t\tbackground-color: #f9fafb;\r\n\t}\r\n\r\n\t.select-option.selected {\r\n\t\tbackground-color: #eff6ff;\r\n\t}\r\n\r\n\t.option-icon {\r\n\t\tfont-size: 40rpx;\r\n\t\tmargin-right: 16rpx;\r\n\t}\r\n\r\n\t.option-label {\r\n\t\tflex: 1;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #111827;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.select-option.selected .option-label {\r\n\t\tcolor: #2563eb;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.option-check {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #2563eb;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-left: 12rpx;\r\n\t}\r\n\r\n\t.check-icon {\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 18rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.input-wrapper,\r\n\t.textarea-wrapper {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.input {\r\n\t\tflex: 1;\r\n\t\tpadding: 28rpx 28rpx;\r\n\t\tborder: 1.5rpx solid #e5e7eb;\r\n\t\tborder-radius: 14rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tbackground-color: #fafbfc;\r\n\t\tcolor: #111827;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tline-height: 1.6;\r\n\t}\r\n\r\n\t.textarea {\r\n\t\tflex: 1;\r\n\t\tpadding: 32rpx 28rpx;\r\n\t\tborder: 1.5rpx solid #e5e7eb;\r\n\t\tborder-radius: 14rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tbackground-color: #fafbfc;\r\n\t\tcolor: #111827;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tline-height: 2.0;\r\n\t\tmin-height: 280rpx;\r\n\t}\r\n\r\n\t.input::placeholder {\r\n\t\tcolor: #9ca3af;\r\n\t\tfont-size: 32rpx;\r\n\t\tline-height: 1.6;\r\n\t}\r\n\r\n\t.textarea::placeholder {\r\n\t\tcolor: #9ca3af;\r\n\t\tfont-size: 32rpx;\r\n\t\tline-height: 2.0;\r\n\t}\r\n\r\n\t.textarea-wrapper {\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.textarea-wrapper .textarea {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.textarea-wrapper .voice-btn {\r\n\t\talign-self: flex-end;\r\n\t\tmargin-top: 16rpx;\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t}\r\n\r\n\t.input:focus,\r\n\t.textarea:focus {\r\n\t\tborder-color: #2563eb;\r\n\t\tbackground-color: #ffffff;\r\n\t\tbox-shadow: 0 0 0 4rpx rgba(37, 99, 235, 0.08);\r\n\t\toutline: none;\r\n\t}\r\n\r\n\r\n\t.voice-btn {\r\n\t\twidth: 72rpx;\r\n\t\theight: 72rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);\r\n\t\tborder: 1.5rpx solid #e5e7eb;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tflex-shrink: 0;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tcursor: pointer;\r\n\t\tposition: relative;\r\n\t\tz-index: 10;\r\n\t\tbox-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.04);\r\n\t}\r\n\r\n\t.voice-btn:active {\r\n\t\tbackground: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%);\r\n\t\ttransform: scale(0.95);\r\n\t\tbox-shadow: 0 1rpx 3rpx rgba(0, 0, 0, 0.08);\r\n\t}\r\n\r\n\t.voice-btn.recording {\r\n\t\tbackground: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\r\n\t\tborder-color: #ef4444;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(239, 68, 68, 0.4);\r\n\t\tanimation: pulse 1.5s infinite;\r\n\t}\r\n\r\n\t.voice-icon {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\r\n\t.voice-btn.recording .voice-icon {\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t@keyframes pulse {\r\n\r\n\t\t0%,\r\n\t\t100% {\r\n\t\t\ttransform: scale(1);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: scale(1.1);\r\n\t\t\topacity: 0.8;\r\n\t\t}\r\n\t}\r\n\r\n\t.power-input-wrapper {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.power-input {\r\n\t\tflex: 1;\r\n\t\tfont-size: 32rpx;\r\n\t\tpadding: 28rpx 28rpx;\r\n\t}\r\n\r\n\t.power-input::placeholder {\r\n\t\tfont-size: 32rpx;\r\n\t}\r\n\r\n\t.unit {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #475569;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.address-wrapper {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 28rpx 28rpx;\r\n\t\tborder: 1.5rpx solid #e5e7eb;\r\n\t\tborder-radius: 14rpx;\r\n\t\tbackground-color: #fafbfc;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.address-wrapper:active {\r\n\t\tborder-color: #2563eb;\r\n\t\tbackground-color: #ffffff;\r\n\t\tbox-shadow: 0 0 0 4rpx rgba(37, 99, 235, 0.08);\r\n\t}\r\n\r\n\t.address-text,\r\n\t.address-placeholder {\r\n\t\tflex: 1;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #111827;\r\n\t\tline-height: 1.6;\r\n\t}\r\n\r\n\t.address-placeholder {\r\n\t\tcolor: #9ca3af;\r\n\t}\r\n\r\n\t.address-icon {\r\n\t\tfont-size: 28rpx;\r\n\t\tmargin-left: 12rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\r\n\t.location-info {\r\n\t\tmargin-top: 12rpx;\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 10rpx 18rpx;\r\n\t\tbackground: linear-gradient(135deg, #eff6ff 0%, #f0f9ff 100%);\r\n\t\tcolor: #2563eb;\r\n\t\tfont-size: 22rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tborder: 1rpx solid rgba(37, 99, 235, 0.2);\r\n\t}\r\n\r\n\t.photo-upload {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 24rpx;\r\n\t}\r\n\r\n\t.photo-item,\r\n\t.photo-add {\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t\tborder-radius: 14rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.photo-item {\r\n\t\tposition: relative;\r\n\t\tborder: 1.5rpx solid #e5e7eb;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.photo-item:active {\r\n\t\ttransform: scale(0.98);\r\n\t\tbox-shadow: 0 1rpx 4rpx rgba(0, 0, 0, 0.08);\r\n\t}\r\n\r\n\t.photo-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.photo-delete {\r\n\t\tposition: absolute;\r\n\t\ttop: 8rpx;\r\n\t\tright: 8rpx;\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: rgba(0, 0, 0, 0.6);\r\n\t\tcolor: #fff;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tbackdrop-filter: blur(4rpx);\r\n\t}\r\n\r\n\t.photo-add {\r\n\t\tborder: 1.5rpx dashed #d1d5db;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground: #fafbfc;\r\n\t\tcolor: #9ca3af;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.photo-add:active {\r\n\t\tborder-color: #2563eb;\r\n\t\tbackground: #eff6ff;\r\n\t\tcolor: #2563eb;\r\n\t\ttransform: scale(0.98);\r\n\t}\r\n\r\n\t.photo-add-icon {\r\n\t\tfont-size: 48rpx;\r\n\t\tmargin-bottom: 8rpx;\r\n\t}\r\n\r\n\t.photo-add-text {\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t/* AIåˆ†ææŒ‰é’®æ ·å¼ */\r\n\t.photo-ai-btn {\r\n\t\tposition: absolute;\r\n\t\tbottom: 8rpx;\r\n\t\tleft: 8rpx;\r\n\t\tright: 8rpx;\r\n\t\tbackground: rgba(37, 99, 235, 0.95);\r\n\t\tbackdrop-filter: blur(8rpx);\r\n\t\tborder-radius: 8rpx;\r\n\t\tpadding: 10rpx 14rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.photo-ai-btn:active {\r\n\t\tbackground: rgba(37, 99, 235, 1);\r\n\t\ttransform: scale(0.98);\r\n\t}\r\n\r\n\t.ai-text {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #ffffff;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.photo-ai-loading {\r\n\t\tposition: absolute;\r\n\t\tbottom: 8rpx;\r\n\t\tleft: 8rpx;\r\n\t\tright: 8rpx;\r\n\t\tbackground: rgba(37, 99, 235, 0.95);\r\n\t\tbackdrop-filter: blur(8rpx);\r\n\t\tborder-radius: 8rpx;\r\n\t\tpadding: 10rpx 14rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.ai-loading-text {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #ffffff;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t/* AIåˆ†æç»“æœæ ·å¼ */\r\n\t.ai-result-section {\r\n\t\tmargin-top: 24rpx;\r\n\t\tpadding-top: 24rpx;\r\n\t\tborder-top: 1rpx solid #e5e7eb;\r\n\t}\r\n\r\n\t.ai-result-title {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.ai-title-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #111827;\r\n\t}\r\n\r\n\t.ai-result-item {\r\n\t\tbackground: #f9fafb;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tmargin-bottom: 16rpx;\r\n\t\tborder: 1rpx solid #e5e7eb;\r\n\t}\r\n\r\n\t.ai-result-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 16rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tpadding-bottom: 16rpx;\r\n\t\tborder-bottom: 1rpx solid #e5f3ec;\r\n\t}\r\n\r\n\t.ai-result-photo {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tborder: 1rpx solid #e5e7eb;\r\n\t}\r\n\r\n\t.ai-result-info {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.ai-result-label {\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #111827;\r\n\t}\r\n\r\n\t.ai-result-time {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\r\n\t.ai-result-content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.ai-result-desc,\r\n\t.ai-result-solution {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.ai-desc-label,\r\n\t.ai-solution-label {\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #111827;\r\n\t\tmargin-bottom: 8rpx;\r\n\t}\r\n\r\n\t.ai-desc-text,\r\n\t.ai-solution-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #374151;\r\n\t\tline-height: 1.6;\r\n\t\tpadding: 12rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 8rpx;\r\n\t\tborder-left: 2rpx solid #2563eb;\r\n\t}\r\n\r\n\t.ai-solution-text {\r\n\t\tborder-left-color: #10b981;\r\n\t}\r\n\r\n\t.form-actions {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tdisplay: flex;\r\n\t\tgap: 16rpx;\r\n\t\tpadding: 20rpx 32rpx;\r\n\t\tpadding-bottom: calc(20rpx + env(safe-area-inset-bottom));\r\n\t\tbackground: #ffffff;\r\n\t\tborder-top: 1rpx solid #e5e7eb;\r\n\t\tbox-shadow: 0 -4rpx 20rpx rgba(0, 0, 0, 0.06);\r\n\t\tz-index: 100;\r\n\t}\r\n\r\n\t.btn {\r\n\t\tflex: 1;\r\n\t\theight: 96rpx;\r\n\t\tline-height: 96rpx;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 14rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tborder: none;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tletter-spacing: 0.5rpx;\r\n\t}\r\n\r\n\t.btn-primary {\r\n\t\tcolor: #fff;\r\n\t\tbackground: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);\r\n\t\tbox-shadow: 0 6rpx 16rpx rgba(37, 99, 235, 0.35);\r\n\t}\r\n\r\n\t.btn-primary:active {\r\n\t\tbackground: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);\r\n\t\ttransform: scale(0.98);\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(37, 99, 235, 0.25);\r\n\t}\r\n\r\n\t.btn-secondary {\r\n\t\tbackground-color: #ffffff;\r\n\t\tcolor: #374151;\r\n\t\tborder: 1.5rpx solid #d1d5db;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);\r\n\t}\r\n\r\n\t.btn-secondary:active {\r\n\t\tbackground-color: #f9fafb;\r\n\t\tborder-color: #9ca3af;\r\n\t\ttransform: scale(0.98);\r\n\t}\r\n\r\n\t/* è¯­è¨€é€‰æ‹©å™¨æ ·å¼ */\r\n\t.language-picker-mask {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tz-index: 9999;\r\n\t}\r\n\r\n\t.language-picker {\r\n\t\twidth: 600rpx;\r\n\t\tmax-height: 80vh;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 24rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.3);\r\n\t}\r\n\r\n\t.picker-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 32rpx 36rpx;\r\n\t\tborder-bottom: 2rpx solid #e2e8f0;\r\n\t\tbackground-color: #f8fafb;\r\n\t}\r\n\r\n\t.picker-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #1f2933;\r\n\t}\r\n\r\n\t.picker-close {\r\n\t\tfont-size: 48rpx;\r\n\t\tcolor: #6b7280;\r\n\t\tline-height: 1;\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tborder-radius: 50%;\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\r\n\t.picker-close:active {\r\n\t\tbackground-color: #e2e8f0;\r\n\t}\r\n\r\n\t.picker-content {\r\n\t\tmax-height: 60vh;\r\n\t\tpadding: 20rpx 0;\r\n\t}\r\n\r\n\t.picker-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 28rpx 36rpx;\r\n\t\tborder-bottom: 1rpx solid #f1f5f9;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.picker-item:active {\r\n\t\tbackground-color: #f8fafb;\r\n\t}\r\n\r\n\t.picker-item.active {\r\n\t\tbackground-color: #f0fdf4;\r\n\t}\r\n\r\n\t.picker-item-text {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #1f2933;\r\n\t}\r\n\r\n\t.picker-item.active .picker-item-text {\r\n\t\tcolor: #1f7a4d;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.picker-item-check {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #1f7a4d;\r\n\t\tfont-weight: bold;\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/Administrator/Desktop/xydianan/xydianan/pages/user/demand/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["userStore","uni","baiduSpeech","offline","reverseGeocode","request"],"mappings":"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"}